"use strict";var NEW_GAME=document.querySelector(".new-game"),FIELD=document.querySelector(".field"),TABLE={table:1,tbody:1},TABLE_STR={tr:1,td:3},X="X",O="O",EMPETY=0,win=EMPETY,matrix=void 0,init=function(){NEW_GAME.addEventListener("click",function(){return newGame()}),FIELD.addEventListener("click",function(t){null!=FIELD.querySelector("tbody")&&clickCell(t)})},clear=function(){var t=FIELD.firstChild;FIELD.removeChild(t),matrix=new Array(TABLE_STR.td),win=EMPETY},newGame=function(){null!=FIELD.firstChild&&clear(),create(),decorate()};init();var create=function(){for(var t=creationField(TABLE,FIELD),e=0;e<TABLE_STR.td;e++)creationField(TABLE_STR,t);creationMatrix()},creationField=function(t,e){var n=e;for(var r in t){for(var i=0;i<t[r];i++){var a=document.createElement(r);n.appendChild(a)}n=n.lastChild}return n},creationMatrix=function(){matrix=new Array(TABLE_STR.td);for(var t=0;t<TABLE_STR.td;t++){matrix[t]=new Array(TABLE_STR.td);for(var e=0;e<TABLE_STR.td;e++)matrix[t][e]=EMPETY}},decorate=function(){FIELD.querySelector("table").style.width="100%",FIELD.querySelector("table").style.height="520px";var t=FIELD.querySelectorAll("td");t.forEach(function(t){t.style.border="1px solid #000",t.style.backgroundColor="#e5e5e5",t.style.textAlign="center",t.style.fontSize="110px",t.style.width="33%",t.style.height="33%"}),statusBtn("RESTART","btn btn-lg new-game btn-danger")},statusBtn=function(t,e){NEW_GAME.innerText=t,NEW_GAME.className=e},getCell=function(t,e){var n=FIELD.querySelector("tbody").childNodes[t];return n.childNodes[e]},setCell=function(t,e,n){return matrix[t][e]=n},random=function(t,e){var n=t+Math.random()*(e+1-t);return n=Math.floor(n)},clickCell=function(t){var e=t.toElement.parentNode.rowIndex,n=t.toElement.cellIndex,r=matrix[e][n];if(r!=EMPETY)return!1;t.toElement.innerHTML=X;var i=t.toElement.textContent;return setCell(e,n,i),checkWin(X,"YOU WIN"),win!=X&&void(0!=endGame()&&compTurn())},compTurn=function(){for(;;){var t=random(0,2),e=random(0,2),n=getCell(t,e);if(n.textContent==EMPETY){n.innerHTML=O,setCell(t,e,O);break}}checkWin(O,"YOU LOSE")},endGame=function(){for(var t=0;t<TABLE_STR.td;t++)for(var e=0;e<TABLE_STR.td;e++)if(matrix[t][e]==EMPETY)return!0;return statusBtn("AGAIN?","btn btn-lg new-game btn-warning"),!1},checkWin=function(t,e){for(var n=void 0,r=void 0,i=void 0,a=0;a<TABLE_STR.td;a++)n=matrix[a][0],r=matrix[a][1],i=matrix[a][2],winer(t,e,n,r,i),n=matrix[0][a],r=matrix[1][a],i=matrix[2][a],winer(t,e,n,r,i);n=matrix[0][0],r=matrix[1][1],i=matrix[2][2],winer(t,e,n,r,i),n=matrix[2][0],r=matrix[1][1],i=matrix[0][2],winer(t,e,n,r,i)},winer=function(t,e,n,r,i){n==t&&r==t&&i==t&&(win=t,statusBtn(e,"btn btn-lg new-game btn-warning"))};